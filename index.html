<!doctype html>
<html lang = "en">

<head>
  <meta charset = "utf-8"/>
  <title>Fatal Police Shootings</title>
  <meta name = "author" content = "Eli Rapport and Musa Jallow">
  <meta name = "description" content = "Infographics">
  <link rel = "stylesheet" href = "../../css/styles.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src='https://cdn.plot.ly/plotly-2.6.3.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js'></script>
</head>
</head>

<script>

d3.json('https://raw.githubusercontent.com/elirapport22/Police-Killings-Since-2015/main/data/crime.json', function(err, rows){

    function unpack(rows, key) {
        return rows.map(function(row) { return row[key]; });
    }

    var scl = [[0,'rgb(5, 10, 172)'],[0.35,'rgb(140, 60, 190)'],[0.5,'rgb(70, 100, 245)'], [0.6,'rgb(90, 20, 245)'],[0.7,'rgb(106, 137, 247)'],[1,'rgb(220, 220, 220)']];

    var data = [{
        type:'scattergeo',
        locationmode: 'USA-states',
        lon: unpack(rows, 'longitude'),
        lat: unpack(rows, 'latitude'),
        hoverinfor:  unpack(rows, 'date'),
        text:  unpack(rows, 'name'),
        mode: 'markers',
        marker: {
            size: 4,
            opacity: 0.5,
            reversescale: true,
            autocolorscale: false,
            symbol: 'circle',
            line: {
                width: .5,
                color: 'rgb(102,102,102)'
            },
            colorscale: scl,
            cmin: 0,
            color: unpack(rows, 'age'),
            colorbar: {
                title: 'Victim Age (Years)'
            }
        }
    }];


    var layout = {
        title: 'Fatal Police Shootings in the US',
        colorbar: true,
        geo: {
            scope: 'usa',
            projection: {
                type: 'albers usa'
            },
            showland: true,
            landcolor: 'rgb(250,250,250)',
            subunitcolor: 'rgb(217,217,217)',
            countrycolor: 'rgb(217,217,217)',
            countrywidth: 0.5,
            subunitwidth: 0.5
        }
    };

    Plotly.newPlot("myDiv", data, layout, {showLink: false});

});


</script>
<body>
  <div id = "myDiv">
  </div>
</body>
